<div class="container" style="width: 1000px;">
  <div class="row justify-content-center my-4">
    <h2>プロフィール</h2>
  </div>

  <div class="row justify-content-center">
    <%= attachment_image_tag @user, :profile_image, :fill, 150, 150, fallback: "no_image.jpg", class:"rounded-circle"; %>
  </div>

  <h4 class="row justify-content-center">
    <%= @user.name %>
  </h4>

<div class="profile-container mt-4">
  <p><i class="fas fa-map-marker-alt"></i>   <%= @user.residence %></p>
  <p><%= @user.introduction %></p>
  <table>
    <tr>
      <th>フォロー</th>
      <th><%= link_to @user.followings.count, user_followings_path(@user) %></th>
    </tr>
    <tr>
      <th>フォロワー</th>
      <th><%= link_to @user.followers.count, user_followers_path(@user) %></th>
    </tr>
  </table>

  <% if current_user != @user %>
    <% if current_user.following?(@user) %>
      <%= link_to "フォロー外す", user_relationships_path(@user.id), method: :delete %>
    <% else %>
      <%= link_to "フォローする", user_relationships_path(@user.id), method: :post %>
    <% end %>
  <% else %>
    <%= link_to 'プロフィール編集',edit_user_path(@user) %>
  <% end %>

</div>
<hr>

  <!--投稿一覧-->

  <h2 class="row justify-content-center"><%= @user.name%>さんの投稿</h2>
  <hr>

  <div class="row">
    <% @diaries.each do |diary| %>
    <div class="d-flex flex-wrap">

      <!--ダイアリー-->
      <div class="card m-3" style="width: 300px; height: 480px;">
        <%= link_to diary_path(diary.id) do %>
        <%= attachment_image_tag diary, :image, :fill, 300, 200 %>
        <% end %>

        <div class="card-body">
          <ul class="list-group list-group-flush">
            <li class="list-group-item">
              距離　　　<%= diary.distance %> km<br>
              時間　　　<%= sprintf("%02d", diary.hour) %> : <%= sprintf("%02d", diary.minute) %> : <%= sprintf("%02d", diary.second) %><br>
              ペース　　<%= sprintf("%02d", diary.pace_minute) %> : <%= sprintf("%02d", diary.pace_second) %> / km
            </li>
          </ul>

          <p class="d-inline-block text-truncate" style="max-width: 250px;"><%= diary.caption %></p>
          <p><%= attachment_image_tag diary.user, :profile_image, :fill, 50, 50, fallback: "no_image.jpg", class:"mt-3 rounded-circle"; %></p>
          <p>
            <% if diary.favorited_by?(current_user) %>
              <%= link_to diary_favorites_path(diary), method: :delete, loclal: true do %>
                <i class="far fa-thumbs-up", style="color: green;"></i>
              <% end %>
                <%= diary.favorites.count %>good
            <% else %>
              <%= link_to diary_favorites_path(diary), method: :post, local: true do %>
                <i class="far fa-thumbs-up", style="color: black;"></i>
              <% end %>
                <%= diary.favorites.count %>good
            <% end %>

            <%= diary.diary_comments.count %>コメント

            <%=link_to "詳細", diary_path(diary.id) %>
          </p>

        </div>
      </div>
    </div>
  <% end %>
</div>

<div class="row justify-content-center my-5">
  <%= paginate @diaries %>
</div>

</div>